# MySQL Complete Guide - Learning Roadmap

> 从基础到精通的完整MySQL学习路线图

---

## 📖 关于本路线图

本路线图为 **mysql-complete-guide** 项目设计，包含两个递进式学习阶段：

1. **Fundamentals（基础与业务开发）** - 快速掌握MySQL业务开发能力
2. **Advanced（原理与优化）** - 深入理解MySQL底层机制与性能优化

两个阶段相互配合，既能满足快速上手的需求，也能支撑深入学习的目标。

---

## 🎯 学习路径总览

```
┌─────────────────────────────────────────────────────────┐
│                    环境准备（30分钟）                      │
│              getting-started/setup.md                   │
└─────────────────────────────────────────────────────────┘
                            ↓
┌─────────────────────────────────────────────────────────┐
│              阶段一：Fundamentals (7-14天)               │
│                   基础与业务开发                          │
│                                                         │
│  Week 1: 数据库设计 + 单表操作                            │
│  Week 2: 多表查询 + 业务实战 + 性能优化 + 最佳实践         │
│                                                         │
│  产出：能够独立设计和开发完整的业务系统                    │
└─────────────────────────────────────────────────────────┘
                            ↓
                      完成并巩固
                            ↓
┌─────────────────────────────────────────────────────────┐
│              阶段二：Advanced (12-16周)                  │
│                   原理与优化                             │
│                                                         │
│  Week 1-2:  基础原理（架构、日志、事务）                  │
│  Week 3-4:  索引与锁机制                                 │
│  Week 5-8:  性能优化（索引、查询、写入）                  │
│  Week 9-12: 高可用架构（主从、复制、备份）                │
│  Week 13-16:进阶主题（分库分表、监控、调优）               │
│                                                         │
│  产出：具备生产环境优化和架构设计能力                      │
└─────────────────────────────────────────────────────────┘
```

---

## 🚀 阶段一：Fundamentals - 基础与业务开发

**目标**：7-14天快速掌握MySQL业务开发能力
**位置**：`fundamentals/` 目录（26个文件）
**学习成果**：能够独立设计和开发完整的业务系统

### Week 1: 数据库设计与单表操作（第1-7天）

#### Day 1-2: 数据库设计基础（5个文件）

**学习目标**：掌握规范的数据库设计方法

- [ ] `01-表设计基础与规范.md`
  - 数据库设计流程（需求 → 概念 → 逻辑 → 物理设计）
  - 命名规范（数据库名、表名、字段名、索引名）
  - 字段类型选择（整型、字符串、时间、浮点、JSON）
  - 字段属性设计（NULL、默认值、字符集、注释）

- [ ] `02-主键与索引设计.md`
  - 主键策略（自增ID、UUID、雪花ID、复合主键）
  - 唯一索引设计（业务唯一性约束）
  - 普通索引设计（单列 vs 联合索引、最左前缀）
  - 索引设计原则（何时需要、何时不需要、数量控制）

- [ ] `03-表关系设计.md`
  - 一对一、一对多、多对多关系设计
  - 外键 vs 应用层控制
  - 自关联设计（树形结构、邻接表、路径枚举、闭包表）

- [ ] `04-范式与反范式.md`
  - 三范式理解（1NF、2NF、3NF）
  - 反范式设计（数据冗余场景、一致性维护）
  - 平衡设计（性能 vs 一致性）

- [ ] `05-常用表设计模式.md`
  - 软删除、时间戳、状态字段、版本号、扩展字段设计
  - 实战案例：用户表、商品表、订单表完整设计

**检查点**：
- ✓ 能为不同业务场景选择合适的字段类型
- ✓ 能设计合理的主键和索引
- ✓ 能设计一对一、一对多、多对多关系
- ✓ 能独立设计一个完整的业务表结构

---

#### Day 3-5: 单表操作（4个文件）

**学习目标**：熟练进行单表CRUD操作

- [ ] `06-单表增删改查基础.md`
  - CREATE TABLE详解（约束、索引、引擎、表选项）
  - INSERT操作（批量、忽略重复、插入更新、替换）
  - SELECT操作（条件、排序、限制、去重）
  - UPDATE操作（单条、批量、条件、表达式）
  - DELETE操作（删除 vs 清空、软删除）

- [ ] `07-WHERE条件查询.md`
  - 比较运算符（等值、不等、范围、区间）
  - 逻辑运算符（AND、OR、NOT、优先级）
  - 模糊查询（LIKE、性能问题、全文索引）
  - NULL值处理（IS NULL、IFNULL、COALESCE、陷阱）
  - IN与NOT IN（性能对比、NULL陷阱）

- [ ] `08-聚合与分组查询.md`
  - 聚合函数（COUNT、SUM、AVG、MAX、MIN、GROUP_CONCAT）
  - GROUP BY分组（单字段、多字段、WITH ROLLUP）
  - HAVING过滤（HAVING vs WHERE区别）
  - 分组查询常见错误（ONLY_FULL_GROUP_BY）

- [ ] `09-排序与分页.md`
  - ORDER BY排序（单字段、多字段、表达式、FIELD自定义）
  - LIMIT分页（基础分页、深度分页问题与优化、游标分页）
  - 排序性能优化（索引排序、覆盖索引）

**实战案例**：
- 用户管理系统（注册、登录、用户列表、搜索）
- 商品管理（上架、查询、修改、下架、搜索）
- 数据统计（按时间统计、分类统计、排行榜）

**检查点**：
- ✓ 能编写完整的CREATE TABLE语句
- ✓ 能使用不同的INSERT方式
- ✓ 能编写各种WHERE条件查询
- ✓ 能正确处理NULL值
- ✓ 能使用聚合函数和分组查询
- ✓ 能实现分页查询并理解深度分页问题

---

### Week 2: 多表查询与业务实战（第8-14天）

#### Day 6-8: 多表查询（4个文件）

**学习目标**：能够编写复杂的多表关联查询

- [ ] `10-表关联查询基础.md`
  - INNER JOIN（内连接、关联条件、多表连接、自连接）
  - LEFT JOIN（左外连接、不匹配数据、性能考虑）
  - RIGHT JOIN（右外连接、为什么少用）
  - CROSS JOIN（笛卡尔积、使用场景）
  - JOIN性能优化（小表驱动、索引优化、字段类型一致）

- [ ] `11-子查询.md`
  - 标量子查询、列子查询（IN、ANY、ALL）、行子查询
  - 表子查询（FROM派生表）
  - EXISTS子查询（EXISTS vs IN对比、NOT EXISTS）
  - 子查询优化（改写为JOIN、子查询物化、半连接）

- [ ] `12-复杂查询场景.md`
  - UNION查询（UNION vs UNION ALL）
  - CASE WHEN表达式（简单/搜索表达式、分组统计、行转列）
  - 窗口函数（ROW_NUMBER、RANK、DENSE_RANK、LAG、LEAD）
  - 公用表表达式CTE（WITH子句、递归CTE）

- [ ] `13-常见业务查询模式.md`
  - 排行榜查询（销量TOP N、评分最高、分组排行）
  - 分类统计（按地区、类别、时间段统计）
  - 去重查询（DISTINCT、GROUP BY去重）
  - 存在性判断、计数统计、时间范围查询

**实战案例**：
- 电商订单系统（订单列表、详情、销售统计、导出）
- 博客系统（文章列表、分类查询、标签关联、热门文章）
- 权限系统（用户角色、角色权限、权限判断）

**检查点**：
- ✓ 能熟练使用各种JOIN
- ✓ 能编写子查询并理解何时使用
- ✓ 能使用CASE WHEN实现条件逻辑
- ✓ 能使用窗口函数（MySQL 8.0+）
- ✓ 能编写排行榜查询和分类统计

---

#### Day 9-11: 业务场景实战（5个文件）

**学习目标**：掌握常见业务场景的设计与实现

- [ ] `14-用户系统设计与实现.md`
  - 表设计（users、user_profiles、user_login_logs、user_tokens）
  - 用户注册（唯一性检查、密码加密、事务处理）
  - 用户登录（凭证验证、登录记录、Token管理、失败限制）
  - 用户信息查询（基础信息、关联资料、列表分页、搜索）
  - 用户状态管理（启用/禁用、软删除、状态流转）

- [ ] `15-订单系统设计与实现.md`
  - 表设计（orders、order_items、order_status_logs、products）
  - 订单创建（订单号生成、主表+明细、库存扣减、金额计算、并发控制）
  - 订单查询（列表、详情、我的订单、搜索）
  - 订单统计（销售额、订单量、客单价、TOP商品）
  - 订单状态流转（状态机、日志记录）
  - 订单取消（库存回退、状态更新、退款、事务处理）

- [ ] `16-内容管理系统设计与实现.md`
  - 表设计（articles、categories、tags、article_tags、comments、article_stats）
  - 文章发布（草稿、发布、定时、标签关联、分类设置）
  - 文章查询（列表、详情、分类文章、标签文章、全文搜索）
  - 评论系统（列表、回复关联、审核、统计）
  - 点赞收藏（去重、取消、统计更新、我的收藏）
  - 浏览量统计（访问记录、UV/PV统计、热门排行）

- [ ] `17-营销系统设计与实现.md`
  - 优惠券系统（发放、领取、使用、过期）
  - 积分系统（获取、消费、流水、统计）
  - 活动系统（配置、参与、中奖、统计）

- [ ] `18-数据分析查询.md`
  - 销售数据分析（日报、周报、月报、年报）
  - 用户行为分析（活跃度、新增、留存、流失）
  - 转化漏斗分析（注册、下单、支付转化率）
  - 时间序列分析（同比、环比、趋势）
  - RFM模型（最近消费、频率、金额、客户分群）

**实战综合案例**：
- 电商平台核心模块（用户、商品、订单、优惠券、积分）
- 内容平台核心模块（用户、文章、分类、标签、评论、互动）

**检查点**：
- ✓ 能设计完整的用户系统
- ✓ 能设计完整的订单系统（含事务处理）
- ✓ 能设计完整的内容管理系统
- ✓ 能处理并发场景（库存扣减、乐观锁）
- ✓ 能实现数据统计和分析查询

---

#### Day 12-13: 性能优化（4个文件）

**学习目标**：具备SQL性能优化能力

- [ ] `19-索引优化实战.md`
  - 索引基础回顾（B+树、聚簇/非聚簇）
  - 索引使用原则（何时需要、何时不需要、数量控制）
  - 联合索引设计（最左前缀、字段顺序、覆盖索引）
  - 索引失效场景（函数、类型转换、前导模糊、OR、NOT、IS NULL）
  - EXPLAIN分析查询计划

- [ ] `20-查询优化实战.md`
  - EXPLAIN详解（id、select_type、type、key、rows、Extra）
  - 慢查询识别（慢查询日志、分析工具、优化流程）
  - 避免全表扫描、分页查询优化、COUNT优化
  - 子查询优化（改写JOIN、IN vs EXISTS）
  - JOIN优化（小表驱动、字段索引、顺序优化）

- [ ] `21-写入优化实战.md`
  - INSERT优化（批量插入、禁用索引、禁用唯一性检查、LOAD DATA）
  - UPDATE优化（避免全表、批量更新、字段最小化）
  - DELETE优化（批量删除、避免大事务、软删除、归档）
  - 事务使用（何时需要、粒度控制、避免长事务、隔离级别）
  - 锁优化（行锁vs表锁、避免死锁、减少锁时间、乐观锁vs悲观锁）
  - 表结构优化（字段类型、长度、NOT NULL、垂直拆分、水平拆分）

- [ ] `22-缓存与架构优化.md`
  - 应用层缓存（结果缓存、计数缓存、热点数据、更新策略）
  - 数据库缓存（InnoDB Buffer Pool、预读机制）
  - 读写分离（主从复制、延迟处理）
  - 分库分表（垂直拆分、水平拆分、分片策略、跨库查询）

**检查点**：
- ✓ 能为常见查询添加合适的索引
- ✓ 能使用EXPLAIN分析查询性能
- ✓ 能识别并优化慢查询
- ✓ 能优化深度分页查询
- ✓ 能优化批量插入和更新
- ✓ 能避免常见的性能陷阱

---

#### Day 14: 最佳实践（3个文件）

**学习目标**：建立良好的开发习惯，避免常见问题

- [ ] `23-SQL编写规范.md`
  - 命名规范（数据库名、表名、字段名、索引名）
  - SQL风格（关键字大小写、缩进、注释）
  - 查询性能建议（避免SELECT *、避免N+1、合理LIMIT、避免类型转换）
  - 安全规范（SQL注入防护、权限最小化、敏感数据加密）
  - 可维护性（复杂SQL拆分、视图使用、数据字典）

- [ ] `24-常见陷阱与解决方案.md`
  - NULL值陷阱（比较、聚合、排序、NOT IN与NULL）
  - 字符串陷阱（大小写、截断、编码）
  - 时间日期陷阱（时区、格式化、闰秒、范围查询边界）
  - 数值陷阱（浮点精度、金额存储、整数溢出、除零）
  - 类型转换陷阱（隐式转换、索引失效）
  - 索引陷阱（OR、IN数量、函数、联合索引顺序）
  - 性能陷阱（SELECT *、子查询、JOIN过多、深分页）
  - 并发陷阱（脏读、不可重复读、幻读、死锁、超卖、更新丢失）

- [ ] `25-数据库设计评审清单.md`
  - 命名规范检查、字段设计检查、索引设计检查
  - 表关系检查、性能检查、扩展性检查、安全性检查

**检查点**：
- ✓ 能编写符合规范的SQL
- ✓ 能避免NULL值、类型转换等常见陷阱
- ✓ 能设计安全的SQL（防止注入）
- ✓ 能进行数据库设计评审

---

### 阶段一学习建议

**学习方法**：
1. **严格按顺序学习** - 每章依赖前一章知识
2. **动手实践** - 每个SQL示例都要在MySQL中执行
3. **完成实战案例** - 每章的案例必须完成
4. **做笔记** - 记录重点和疑问
5. **应用到实际** - 尝试用学到的知识优化现有项目

**学习节奏**：
- **快速上手**（7天）：基础设计 + 单表操作 + 基础多表查询
- **深入学习**（14天）：完整学习所有章节 + 完成所有实战案例
- **每日投入**：1-2小时学习 + 1-2小时实践

**环境准备**：
参考 `getting-started/setup.md` 完成MySQL环境搭建（推荐Docker）

---

## 🔥 阶段二：Advanced - 原理与优化

**目标**：12-16周深入理解MySQL底层机制
**位置**：`advanced/` 目录（8个文件）+ `resources/mysql-45-lectures/`（48个PDF）
**前置条件**：完成阶段一学习，具备业务开发能力
**学习成果**：具备生产环境优化和架构设计能力

### Week 1-2: 基础原理（2个文件）

**学习目标**：建立MySQL核心概念，理解基本工作原理

- [ ] `01-架构与日志系统.md` - 对应PDF第01-02讲
  - MySQL整体架构（Server层 + 存储引擎层）
  - SQL执行流程（连接器 → 分析器 → 优化器 → 执行器）
  - redo log和binlog的作用
  - WAL机制（Write-Ahead Logging）
  - 两阶段提交原理
  - crash-safe保证

- [ ] `02-事务隔离.md` - 对应PDF第03讲
  - ACID特性
  - 四种事务隔离级别（READ UNCOMMITTED、READ COMMITTED、REPEATABLE READ、SERIALIZABLE）
  - MVCC（多版本并发控制）原理
  - 快照读 vs 当前读
  - Read View机制
  - 长事务的危害

**配合PDF学习**：
- 第01讲：基础架构-一条SQL查询语句是如何执行的？
- 第02讲：日志系统-一条SQL更新语句是如何执行的？
- 第03讲：事务隔离-为什么你改了我还看不见？

**检查点**：
- ✓ 能画出MySQL的架构分层图
- ✓ 能解释一条SQL的完整执行流程
- ✓ 能说明redo log和binlog的区别和作用
- ✓ 能说明MySQL的四种事务隔离级别
- ✓ 能解释MVCC的实现原理

---

### Week 3-4: 索引与锁机制（2个文件）

**学习目标**：掌握索引和锁机制的核心原理

- [ ] `03-索引原理.md` - 对应PDF第04-05讲
  - B+树索引结构（为什么是B+树）
  - 主键索引 vs 普通索引
  - 聚簇索引 vs 非聚簇索引
  - 覆盖索引、回表、索引下推
  - 最左前缀原则
  - 前缀索引优化
  - 索引维护代价

- [ ] `04-锁机制.md` - 对应PDF第06-08讲
  - 全局锁（FTWRL）、表锁（LOCK TABLES）
  - MDL锁（元数据锁）
  - 行锁（记录锁、间隙锁、Next-Key Lock）
  - 两阶段锁协议
  - 死锁检测与处理
  - 间隙锁的作用（防止幻读）
  - 行锁加锁规则

**配合PDF学习**：
- 第04讲：深入浅出索引（上）
- 第05讲：深入浅出索引（下）
- 第06讲：全局锁和表锁-给表加个字段怎么有这么多阻碍？
- 第07讲：行锁功过-怎么减少行锁对性能的影响？
- 第08讲：事务到底是隔离的还是不隔离的？

**检查点**：
- ✓ 能画出B+树索引的结构
- ✓ 能说明主键索引和普通索引的区别
- ✓ 能解释什么是覆盖索引和回表
- ✓ 能说明MySQL有哪些锁及各自作用范围
- ✓ 能解释间隙锁的作用

---

### Week 5-8: 性能优化（2个文件）

**学习目标**：掌握MySQL实战中的性能优化技巧

- [ ] `05-索引与性能优化.md` - 对应PDF第09-14讲
  - change buffer机制（减少随机IO）
  - 索引选择问题诊断（优化器选择错误的索引）
  - 字符串索引优化（前缀索引、hash字段、倒序存储）
  - MySQL"抖动"问题（脏页刷新机制）
  - 表空间碎片回收（OPTIMIZE TABLE）
  - count性能优化（count(*) vs count(1) vs count(字段)）
  - InnoDB Buffer Pool

- [ ] `06-查询优化.md` - 对应PDF第16-22讲
  - ORDER BY工作原理（全字段排序 vs rowid排序）
  - 随机查询优化（RAND()的性能问题）
  - 隐式类型转换陷阱（索引失效）
  - 慢查询诊断与优化
  - 幻读问题与间隙锁
  - 行锁加锁规则详解
  - JOIN算法（NLJ、BNL、Hash Join）
  - 临时表使用（用户临时表 vs 内部临时表）
  - 性能优化的"饮鸩止渴"方法

**配合PDF学习**：
- 第09讲：普通索引和唯一索引-应该怎么选择？
- 第10讲：MySQL为什么有时候会选错索引？
- 第11讲：怎么给字符串字段加索引？
- 第12讲：为什么我的MySQL会"抖"一下？
- 第13讲：为什么表数据删掉一半，表文件大小不变？
- 第14讲：count(*)这么慢，我该怎么办？
- 第16讲："order by"是怎么工作的？
- 第17讲：如何正确地显示随机消息？
- 第18讲：为什么这些SQL语句逻辑相同，性能却差异巨大？
- 第19讲：为什么我只查一行的语句，也执行这么慢？
- 第20讲：幻读是什么，幻读有什么问题？
- 第21讲：为什么我只改一行的语句，锁这么多？
- 第22讲：MySQL有哪些"饮鸩止渴"提高性能的方法？

**检查点**：
- ✓ 能解决索引选择错误的问题
- ✓ 能优化字符串字段的索引
- ✓ 能解释MySQL"抖动"的原因并优化
- ✓ 能优化count查询
- ✓ 能分析和解决慢查询

---

### Week 9-12: 高可用架构（1个文件）

**学习目标**：掌握MySQL高可用架构设计与运维

- [ ] `07-高可用架构.md` - 对应PDF第23-29讲
  - 双1配置（sync_binlog=1 + innodb_flush_log_at_trx_commit=1）
  - 主从复制原理（binlog dump线程 → IO线程 → relay log → SQL线程）
  - binlog格式对比（ROW vs STATEMENT vs MIXED）
  - 半同步复制（保证至少一个从库收到binlog）
  - 主备延迟优化（并行复制、slave_parallel_workers）
  - 主备切换策略（可靠性优先 vs 可用性优先）
  - 读写分离架构（一主多从、延迟处理）
  - 数据库健康检查（select 1 vs 更新系统表）
  - 备份恢复策略（全量备份 + 增量备份）

**配合PDF学习**：
- 第23讲：MySQL是怎么保证数据不丢的？
- 第24讲：MySQL是怎么保证主备一致的？
- 第25讲：MySQL是怎么保证高可用的？
- 第26讲：备库为什么会延迟好几个小时？
- 第27讲：主库出问题了，从库怎么办？
- 第28讲：读写分离有哪些坑？
- 第29讲：如何判断一个数据库是不是出问题了？

**检查点**：
- ✓ 能搭建MySQL主从复制环境
- ✓ 能说明主从复制的完整流程
- ✓ 能处理主备延迟问题
- ✓ 能设计读写分离架构
- ✓ 能处理主库故障切换

---

### Week 13-16: 进阶主题（1个文件）

**学习目标**：掌握MySQL高级特性和最佳实践

- [ ] `08-进阶主题.md` - 对应PDF第30-45讲（精选）
  - 误删数据恢复（flashback、binlog恢复、延迟复制从库）
  - JOIN优化（NLJ vs BNL vs Hash Join）
  - 临时表详解（用户临时表 vs 内部临时表、内存临时表）
  - 表复制方案（mysqldump、导出CSV、物理拷贝）
  - grant与权限管理
  - 分区表使用场景与限制
  - 自增ID相关问题（自增值保存、自增锁）
  - insert语句的锁
  - insert唯一键冲突处理
  - MySQL memory引擎
  - 自增ID用完了怎么办？

**配合PDF学习**（选学）：
- 第30讲：答疑文章（一）日志和索引相关问题
- 第31讲：误删数据后除了跑路，还能怎么办？
- 第34讲：到底可不可以使用join？
- 第35讲：join语句怎么优化？
- 第36讲：为什么临时表可以重名？
- 第37讲：什么时候会使用内部临时表？
- 第38讲：都说InnoDB好，那还要不要使用Memory引擎？
- 第39讲：自增主键为什么不是连续的？
- 第40讲：insert语句的锁为什么这么多？
- 第41讲：怎么最快地复制一张表？
- 第42讲：grant之后要跟着flush privileges吗？
- 第43讲：要不要使用分区表？
- 第44讲：答疑文章（三）说一说这些好问题
- 第45讲：自增id用完怎么办？

**检查点**：
- ✓ 能处理误删数据的恢复
- ✓ 能优化JOIN查询
- ✓ 理解临时表的使用场景
- ✓ 能进行MySQL权限管理
- ✓ 理解自增ID的相关问题

---

### 阶段二学习建议

**学习方法**：
1. **阅读对应章节Markdown**（30分钟）- 理解核心概念
2. **阅读对应PDF课程**（20分钟）- 深入理解原理
3. **动手实践**（30-40分钟）- 执行SQL、观察结果、使用EXPLAIN分析
4. **思考总结**（10分钟）- 回顾知识点、举一反三

**学习节奏**：
- **快速入门**（7天）：01-架构 + 02-事务 + 03-索引 + 04-锁 + 05-性能优化部分
- **深入学习**（12-16周）：完整学习所有章节 + 阅读所有PDF
- **每周投入**：3-5小时学习 + 2-3小时实践

**结合实际工作**：
- 遇到性能问题时，查阅对应章节
- 定期review线上慢查询，应用优化技巧
- 参与架构设计时，考虑高可用方案

---

## 📊 学习进度跟踪

### 阶段一：Fundamentals - 基础与业务开发

**数据库设计基础（5个文件）**
- [ ] 01-表设计基础与规范
- [ ] 02-主键与索引设计
- [ ] 03-表关系设计
- [ ] 04-范式与反范式
- [ ] 05-常用表设计模式

**单表操作（4个文件）**
- [ ] 06-单表增删改查基础
- [ ] 07-WHERE条件查询
- [ ] 08-聚合与分组查询
- [ ] 09-排序与分页

**多表查询（4个文件）**
- [ ] 10-表关联查询基础
- [ ] 11-子查询
- [ ] 12-复杂查询场景
- [ ] 13-常见业务查询模式

**业务场景实战（5个文件）**
- [ ] 14-用户系统设计与实现
- [ ] 15-订单系统设计与实现
- [ ] 16-内容管理系统设计与实现
- [ ] 17-营销系统设计与实现
- [ ] 18-数据分析查询

**性能优化（4个文件）**
- [ ] 19-索引优化实战
- [ ] 20-查询优化实战
- [ ] 21-写入优化实战
- [ ] 22-缓存与架构优化

**最佳实践（3个文件）**
- [ ] 23-SQL编写规范
- [ ] 24-常见陷阱与解决方案
- [ ] 25-数据库设计评审清单

**阶段一预计学时**：30-50小时（7-14天，每天2-4小时）

---

### 阶段二：Advanced - 原理与优化

**基础原理篇**
- [ ] 01-架构与日志系统（3-4小时）
- [ ] 02-事务隔离（2-3小时）

**索引与锁篇**
- [ ] 03-索引原理（3-4小时）
- [ ] 04-锁机制（3-4小时）

**性能优化篇**
- [ ] 05-索引与性能优化（4-5小时）
- [ ] 06-查询优化（4-5小时）

**高可用架构篇**
- [ ] 07-高可用架构（4-5小时）

**进阶主题篇**
- [ ] 08-进阶主题（5-6小时，按需选学）

**阶段二预计学时**：30-40小时（核心内容）+ 20-30小时（PDF深度学习）= 50-70小时

---

## 🎓 学习成果检验

### 阶段一完成后，你应该能够：

**数据库设计能力**
- ✓ 独立设计规范的数据库表结构
- ✓ 为不同业务场景选择合适的字段类型和索引
- ✓ 设计一对一、一对多、多对多关系
- ✓ 理解范式和反范式的应用场景
- ✓ 实现软删除、乐观锁、状态机等常用模式

**SQL编写能力**
- ✓ 编写高效的增删改查SQL
- ✓ 使用JOIN、子查询实现复杂查询
- ✓ 使用聚合函数进行统计分析
- ✓ 优化分页查询和排序查询

**业务实现能力**
- ✓ 实现用户注册、登录系统
- ✓ 实现订单创建、支付流程（含事务处理）
- ✓ 实现内容发布、评论、点赞系统
- ✓ 实现优惠券、积分系统
- ✓ 实现数据统计和分析查询

**性能优化能力**
- ✓ 使用EXPLAIN分析查询计划
- ✓ 为常用查询添加合适的索引
- ✓ 识别并优化慢查询
- ✓ 优化批量插入和更新操作

**规范实践**
- ✓ 遵循SQL编写规范
- ✓ 避免常见陷阱（NULL、类型转换、死锁）
- ✓ 使用数据库设计评审清单

---

### 阶段二完成后，你应该能够：

**原理理解**
- ✓ 理解MySQL架构和SQL执行流程
- ✓ 理解redo log、binlog、undo log的作用
- ✓ 理解事务隔离级别和MVCC原理
- ✓ 理解B+树索引原理和索引维护代价
- ✓ 理解各种锁的机制和加锁规则

**性能优化**
- ✓ 诊断并解决索引选择错误问题
- ✓ 优化字符串字段索引
- ✓ 分析和解决MySQL"抖动"问题
- ✓ 优化count、order by、join查询
- ✓ 解决死锁问题

**架构设计**
- ✓ 搭建主从复制环境
- ✓ 实现读写分离架构
- ✓ 处理主备延迟问题
- ✓ 设计高可用方案
- ✓ 进行分库分表设计

**故障处理**
- ✓ 诊断和优化慢查询
- ✓ 处理误删数据恢复
- ✓ 处理主库故障切换
- ✓ 进行数据库健康检查

---

## 💡 学习资源与工具

### 推荐工具

**命令行工具**
- MySQL CLI（官方命令行工具）
- mycli（带语法高亮的命令行工具）

**图形化工具**
- MySQL Workbench（官方免费工具）
- DBeaver（开源免费，功能强大）
- Navicat（商业软件，界面友好）
- TablePlus（macOS，简洁美观）

**性能分析工具**
- EXPLAIN（查看执行计划）
- SHOW PROFILE（查看SQL执行详情）
- pt-query-digest（Percona工具包，分析慢查询）
- mysqldumpslow（慢查询日志分析）

### 推荐书籍

**完成Fundamentals后阅读**
- 《高性能MySQL》（第4版）- 全面深入
- 《MySQL技术内幕：InnoDB存储引擎》- 深入原理

**完成Advanced后阅读**
- 《数据库系统概念》- 数据库理论
- 《设计数据密集型应用》- 分布式数据库
- 《数据库系统内幕》- 存储引擎原理

### 官方文档

- MySQL官方文档：https://dev.mysql.com/doc/
- InnoDB存储引擎：https://dev.mysql.com/doc/refman/8.0/en/innodb-storage-engine.html
- MySQL性能调优：https://dev.mysql.com/doc/refman/8.0/en/optimization.html

### 实践项目

**阶段一实践**
- 设计并实现一个完整的电商系统数据库
- 设计并实现一个博客/论坛系统数据库
- 优化现有项目的数据库设计和查询

**阶段二实践**
- 搭建MySQL主从复制环境
- 实现读写分离架构
- 配置MySQL高可用方案（MHA、MGR）
- 分析和优化实际项目的慢查询
- 进行数据库压测和性能调优

---

## 📝 学习记录模板

建议创建学习记录文件，跟踪学习进度：

```markdown
# 我的MySQL学习记录

## 开始时间：2025-12-25

### 阶段一：Fundamentals - 基础与业务开发

#### Week 1（12.25-12.31）
- [x] 环境搭建
- [x] 第01-05章：数据库设计基础
- [x] 第06-09章：单表操作
- [ ] 实战：用户管理系统

**本周收获**：
- 理解了表设计规范和字段类型选择
- 学会了主键和索引设计策略
- 掌握了单表CRUD操作

**遗留问题**：
1. 什么时候用联合索引更好？
2. 软删除对性能的影响有多大？

---

#### Week 2（01.01-01.07）
- [ ] 第10-13章：多表查询
- [ ] 第14-18章：业务场景实战
- [ ] 实战：订单系统 + 内容管理系统

**本周计划**：
- 完成JOIN和子查询学习
- 实现完整的订单系统（含并发控制）
- 实现内容管理系统（含统计分析）

---

### 阶段二：Advanced - 原理与优化

#### Week N（MM.DD-MM.DD）
...

### 总结

**完成时间**：____年____月____日
**总学时**：____小时
**核心收获**：
1. ...
2. ...
3. ...
```

---

## 🎯 常见问题 FAQ

**Q: 我是零基础，能学吗？**
A: 建议先学习SQL基础（SELECT、INSERT等），然后从Fundamentals阶段开始。如果有编程基础，可以直接从阶段一开始。

**Q: 需要多久能学完？**
A:
- Fundamentals阶段：7-14天（每天2-4小时）
- Advanced阶段：12-16周（每周3-5小时）
- 总计：3-4个月（根据个人时间投入）

**Q: 两个阶段必须都学吗？**
A:
- 如果目标是业务开发，完成阶段一即可
- 如果想深入理解原理和性能优化，推荐完成两个阶段
- 可以先完成阶段一，工作中遇到问题再学阶段二对应章节

**Q: 学完能做什么？**
A:
- 阶段一：独立设计和开发业务系统，编写规范高效的SQL
- 阶段二：优化SQL性能，解决生产环境问题，设计高可用架构

**Q: 遇到问题怎么办？**
A:
1. 查看课程内容和实战案例
2. 查看MySQL官方文档
3. Google/Stack Overflow搜索
4. 提issue或寻求社区帮助

**Q: MySQL 5.7 和 8.0 有什么区别？**
A:
- 本教程基于MySQL 8.0，但大部分内容适用于5.7
- 8.0新增：窗口函数、CTE、Hash Join等特性
- 建议使用8.0学习，生产环境根据实际情况选择

---

## 🚀 开始你的学习之旅

### 第一步：环境准备（30分钟）

参考 `getting-started/setup.md` 完成MySQL环境搭建

```bash
# 使用Docker启动MySQL（推荐）
docker run --name mysql-study \
  -e MYSQL_ROOT_PASSWORD=123456 \
  -p 3306:3306 \
  -v ~/mysql-data:/var/lib/mysql \
  -d mysql:8.0 \
  --character-set-server=utf8mb4 \
  --collation-server=utf8mb4_unicode_ci

# 连接MySQL
docker exec -it mysql-study mysql -uroot -p123456

# 创建学习数据库
CREATE DATABASE mysql_study DEFAULT CHARACTER SET utf8mb4;
USE mysql_study;
```

---

### 第二步：选择学习路径

**路径A：快速上手（业务开发为主）**
1. 学习 Fundamentals 阶段（7-14天）
2. 完成所有实战案例
3. 应用到实际项目中
4. 遇到性能问题时，查阅 Advanced 对应章节

**路径B：系统学习（深入理解为主）**
1. 学习 Fundamentals 阶段（7-14天）
2. 学习 Advanced 阶段（12-16周）
3. 完成所有实战案例和练习
4. 阅读配套PDF深入理解原理

---

### 第三步：开始学习

👉 **阶段一入口**：[fundamentals/README.md](fundamentals/README.md)
👉 **环境准备**：[getting-started/setup.md](getting-started/setup.md)
👉 **主入口文档**：[README.md](README.md)

---

## 💪 记住

- ✅ **坚持每天学习** - 积少成多，持续进步
- ✅ **多动手实践** - 理论结合实践才能真正掌握
- ✅ **不要害怕犯错** - 在学习环境中大胆尝试
- ✅ **应用到实际** - 将所学应用到工作项目中
- ✅ **享受学习过程** - MySQL的学习是一个持续提升的过程

---

**祝你学习顺利！🚀**

如有问题或建议，欢迎提issue反馈。
